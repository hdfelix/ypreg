!function(t,e){var o,n;n=e.document,o=function(){function o(o){this._options=t.extend({name:"tour",steps:[],container:"body",keyboard:!0,storage:e.localStorage,debug:!1,backdrop:!1,redirect:!0,orphan:!1,duration:!1,basePath:"",template:"<div class='popover'> <div class='arrow'></div> <h3 class='popover-title'></h3> <div class='popover-content'></div> <div class='popover-navigation'> <div class='btn-group'> <button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev</button> <button class='btn btn-sm btn-default' data-role='next'>Next &raquo;</button> <button class='btn btn-sm btn-default' data-role='pause-resume' data-pause-text='Pause' data-resume-text='Resume'>Pause</button> </div> <button class='btn btn-sm btn-default' data-role='end'>End tour</button> </div> </div>",afterSetState:function(){},afterGetState:function(){},afterRemoveState:function(){},onStart:function(){},onEnd:function(){},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNext:function(){},onPrev:function(){},onPause:function(){},onResume:function(){}},o),this._force=!1,this._inited=!1,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return o.prototype.addSteps=function(t){var e,o,n;for(o=0,n=t.length;o<n;o++)e=t[o],this.addStep(e);return this},o.prototype.addStep=function(t){return this._options.steps.push(t),this},o.prototype.getStep=function(e){if(null!=this._options.steps[e])return t.extend({id:"step-"+e,path:"",placement:"right",title:"",content:"<p></p>",next:e===this._options.steps.length-1?-1:e+1,prev:e-1,animation:!0,container:this._options.container,backdrop:this._options.backdrop,redirect:this._options.redirect,orphan:this._options.orphan,duration:this._options.duration,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume},this._options.steps[e])},o.prototype.init=function(t){return this._force=t,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize((e=this,function(){return e.showStep(e._current)})),null!==this._current&&this.showStep(this._current),this._inited=!0,this);var e},o.prototype.start=function(t){var e;return null==t&&(t=!1),this._inited||this.init(t),null===this._current&&(e=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(e,this.showStep,0)),this},o.prototype.next=function(){var t;return t=this.hideStep(this._current),this._callOnPromiseDone(t,this._showNextStep)},o.prototype.prev=function(){var t;return t=this.hideStep(this._current),this._callOnPromiseDone(t,this._showPrevStep)},o.prototype.goTo=function(t){var e;return e=this.hideStep(this._current),this._callOnPromiseDone(e,this.showStep,t)},o.prototype.end=function(){var o,i,r;return r=this,o=function(){if(t(n).off("click.tour-"+r._options.name),t(n).off("keyup.tour-"+r._options.name),t(e).off("resize.tour-"+r._options.name),r._setState("end","yes"),r._inited=!1,r._force=!1,r._clearTimer(),null!=r._options.onEnd)return r._options.onEnd(r)},i=this.hideStep(this._current),this._callOnPromiseDone(i,o)},o.prototype.ended=function(){return!this._force&&!!this._getState("end")},o.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this.setCurrentStep(0),this.start()},o.prototype.pause=function(){var t;return(t=this.getStep(this._current))&&t.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,e.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=t.onPause?t.onPause(this,this._duration):void 0):this},o.prototype.resume=function(){var t,o;return(t=this.getStep(this._current))&&t.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||t.duration,this._timer=e.setTimeout((o=this,function(){return o._isLast()?o.next():o.end()}),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=t.onResume&&this._duration!==t.duration?t.onResume(this,this._duration):void 0):this},o.prototype.hideStep=function(e){var o,n,i,r;if(i=this.getStep(e))return this._clearTimer(),n=this._makePromise(null!=i.onHide?i.onHide(this,e):void 0),r=this,o=function(){var o;if((o=t(i.element)).data("bs.popover")||o.data("popover")||(o=t("body")),o.popover("destroy").removeClass("tour-"+r._options.name+"-element tour-"+r._options.name+"-"+e+"-element"),i.reflex&&o.css("cursor","").off("click.tour-"+r._options.name),i.backdrop&&r._hideBackdrop(),null!=i.onHidden)return i.onHidden(r)},this._callOnPromiseDone(n,o),n},o.prototype.showStep=function(t){var e,o,i,r,s;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(r=this.getStep(t))?(i=t<this._current,e=this._makePromise(null!=r.onShow?r.onShow(this,t):void 0),s=this,o=function(){var e,o;if(s.setCurrentStep(t),o=function(){switch({}.toString.call(r.path)){case"[object Function]":return r.path();case"[object String]":return this._options.basePath+r.path;default:return r.path}}.call(s),e=[n.location.pathname,n.location.hash].join(""),!s._isRedirect(o,e)){if(s._isOrphan(r)){if(!r.orphan)return s._debug("Skip the orphan step "+(s._current+1)+". Orphan option is false and the element doesn't exist or is hidden."),void(i?s._showPrevStep():s._showNextStep());s._debug("Show the orphan step "+(s._current+1)+". Orphans option is true.")}return r.backdrop&&s._showBackdrop(s._isOrphan(r)?void 0:r.element),s._scrollIntoView(r.element,function(){return null!=r.element&&r.backdrop&&s._showOverlayElement(r.element),s._showPopover(r,t),null!=r.onShown&&r.onShown(s),s._debug("Step "+(s._current+1)+" of "+s._options.steps.length)}),r.duration?s.resume():void 0}s._redirect(r,o)},this._callOnPromiseDone(e,o),e):void 0},o.prototype.getCurrentStep=function(){return this._current},o.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this._setState("current_step",t)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},o.prototype._setState=function(t,e){var o;if(this._options.storage){o=this._options.name+"_"+t;try{this._options.storage.setItem(o,e)}catch(n){n.code===DOMException.QUOTA_EXCEEDED_ERR&&this.debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(o,e)}return null==this._state&&(this._state={}),this._state[t]=e},o.prototype._removeState=function(t){var e;return this._options.storage?(e=this._options.name+"_"+t,this._options.storage.removeItem(e),this._options.afterRemoveState(e)):null!=this._state?delete this._state[t]:void 0},o.prototype._getState=function(t){var e,o;return this._options.storage?(e=this._options.name+"_"+t,o=this._options.storage.getItem(e)):null!=this._state&&(o=this._state[t]),void 0!==o&&"null"!==o||(o=null),this._options.afterGetState(t,o),o},o.prototype._showNextStep=function(){var t,e,o,n;return o=this.getStep(this._current),n=this,e=function(){return n.showStep(o.next)},t=this._makePromise(null!=o.onNext?o.onNext(this):void 0),this._callOnPromiseDone(t,e)},o.prototype._showPrevStep=function(){var t,e,o,n;return o=this.getStep(this._current),n=this,e=function(){return n.showStep(o.prev)},t=this._makePromise(null!=o.onPrev?o.onPrev(this):void 0),this._callOnPromiseDone(t,e)},o.prototype._debug=function(t){if(this._options.debug)return e.console.log("Bootstrap Tour '"+this._options.name+"' | "+t)},o.prototype._isRedirect=function(t,e){return null!=t&&""!==t&&("[object RegExp]"===Object.prototype.toString.call(t)&&!t.test(e)||"[object String]"===Object.prototype.toString.call(t)&&t.replace(/\?.*$/,"").replace(/\/?$/,"")!==e.replace(/\/?$/,""))},o.prototype._redirect=function(e,o){return t.isFunction(e.redirect)?e.redirect.call(this,o):!0===e.redirect?(this._debug("Redirect to "+o),n.location.href=o):void 0},o.prototype._isOrphan=function(e){return null==e.element||!t(e.element).length||t(e.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==t(e.element)[0].namespaceURI},o.prototype._isLast=function(){return this._current<this._options.steps.length-1},o.prototype._showPopover=function(e,o){var n,i,r,s,a,p,u;if(p=t.extend({},this._options),i=(r=t.isFunction(e.template)?t(e.template(o,e)):t(e.template)).find(".popover-navigation"),(a=this._isOrphan(e))&&(e.element="body",e.placement="top",r=r.addClass("orphan")),n=t(e.element),r.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+o),n.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+o+"-element"),e.options&&t.extend(p,e.options),e.reflex&&n.css("cursor","pointer").on("click.tour-"+this._options.name,(u=this,function(){return u._isLast()?u.next():u.end()})),e.prev<0&&i.find("[data-role='prev']").addClass("disabled"),e.next<0&&i.find("[data-role='next']").addClass("disabled"),e.duration||i.find("[data-role='pause-resume']").remove(),e.template=r.clone().wrap("<div>").parent().html(),n.popover({placement:e.placement,trigger:"manual",title:e.title,content:e.content,html:!0,animation:e.animation,container:e.container,template:e.template,selector:e.element}).popover("show"),(s=n.data("bs.popover")?n.data("bs.popover").tip():n.data("popover").tip()).attr("id",e.id),this._reposition(s,e),a)return this._center(s)},o.prototype._reposition=function(e,o){var i,r,s,a,p,u,h;if(a=e[0].offsetWidth,r=e[0].offsetHeight,p=(h=e.offset()).left,u=h.top,(i=t(n).outerHeight()-h.top-e.outerHeight())<0&&(h.top=h.top+i),(s=t("html").outerWidth()-h.left-e.outerWidth())<0&&(h.left=h.left+s),h.top<0&&(h.top=0),h.left<0&&(h.left=0),e.offset(h),"bottom"===o.placement||"top"===o.placement){if(p!==h.left)return this._replaceArrow(e,2*(h.left-p),a,"left")}else if(u!==h.top)return this._replaceArrow(e,2*(h.top-u),r,"top")},o.prototype._center=function(o){return o.css("top",t(e).outerHeight()/2-o.outerHeight()/2)},o.prototype._replaceArrow=function(t,e,o,n){return t.find(".arrow").css(n,e?50*(1-e/o)+"%":"")},o.prototype._scrollIntoView=function(o,n){var i,r,s,a,p,u,h;return(i=t(o)).length?(r=t(e),a=i.offset().top,u=r.height(),p=Math.max(0,a-u/2),this._debug("Scroll into view. ScrollTop: "+p+". Element offset: "+a+". Window height: "+u+"."),s=0,t("body,html").stop(!0,!0).animate({scrollTop:Math.ceil(p)},(h=this,function(){if(2==++s)return n(),h._debug("Scroll into view. Animation end element offset: "+i.offset().top+". Window height: "+r.height()+".")}))):n()},o.prototype._onResize=function(o,n){return t(e).on("resize.tour-"+this._options.name,function(){return clearTimeout(n),n=setTimeout(o,100)})},o.prototype._initMouseNavigation=function(){var e,o,i,r;return e=this,t(n).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)",(r=this,function(t){return t.preventDefault(),r.next()})).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)",(i=this,function(t){return t.preventDefault(),i.prev()})).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",(o=this,function(t){return t.preventDefault(),o.end()})).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(o){var n;return o.preventDefault(),(n=t(this)).text(e._paused?n.data("pause-text"):n.data("resume-text")),e._paused?e.resume():e.pause()})},o.prototype._initKeyboardNavigation=function(){var e;if(this._options.keyboard)return t(n).on("keyup.tour-"+this._options.name,(e=this,function(t){if(t.which)switch(t.which){case 39:return t.preventDefault(),e._isLast()?e.next():e.end();case 37:if(t.preventDefault(),e._current>0)return e.prev();break;case 27:return t.preventDefault(),e.end()}}))},o.prototype._makePromise=function(e){return e&&t.isFunction(e.then)?e:null},o.prototype._callOnPromiseDone=function(t,e,o){return t?t.then((n=this,function(){return e.call(n,o)})):e.call(this,o);var n},o.prototype._showBackdrop=function(){if(!this.backdrop.backgroundShown)return this.backdrop=t("<div/>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,t("body").append(this.backdrop)},o.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},o.prototype._hideBackground=function(){return this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1},o.prototype._showOverlayElement=function(e){var o,n,i;if((n=t(e))&&0!==n.length&&!this.backdrop.overlayElementShown)return this.backdrop.overlayElementShown=!0,o=t("<div/>"),(i=n.offset()).top=i.top,i.left=i.left,o.width(n.innerWidth()).height(n.innerHeight()).addClass("tour-step-background").offset(i),n.addClass("tour-step-backdrop"),t("body").append(o),this.backdrop.$element=n,this.backdrop.$background=o},o.prototype._hideOverlayElement=function(){if(this.backdrop.overlayElementShown)return this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1},o.prototype._clearTimer=function(){return e.clearTimeout(this._timer),this._timer=null,this._duration=null},o}(),e.Tour=o}(jQuery,window);